name: Terraform Modules CI

on:
  pull_request:

jobs:
  validate:
    uses: joao-zanutto/shared-workflows/.github/workflows/tf-validate.yaml@main

  lint:
    uses: joao-zanutto/shared-workflows/.github/workflows/tf-lint.yaml@main

  fmt:
    permissions:
      contents: write
    uses: joao-zanutto/shared-workflows/.github/workflows/tf-fmt.yaml@main

  checkov:
    permissions:
      security-events: write
    uses: joao-zanutto/shared-workflows/.github/workflows/tf-checkov.yaml@main

  docs:
    permissions:
      contents: write
    needs: [validate, fmt, checkov, lint]
    uses: joao-zanutto/shared-workflows/.github/workflows/tf-docs.yaml@main